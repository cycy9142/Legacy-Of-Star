<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_enemy_orang_run</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_enemy</parentName>
  <maskName>spr_enemy_orang_run</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///기본 능력치 관련 

enemy_hp_max = 50;
enemy_hp = 50;

enemy_dmg = 10;

enemy_knock = 5;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///이동/공격 관련 변수 선언


//hero 와 다르게 정해진 속도로 움직임
//마찰력 없음 
move_h_val = 2;

//점프를 위해 사용
move_v_spd = 0;
move_jump_val = 5;

//적 감지 범위
det_range_front = 300;
det_range_height = 50;
det_disturb = 0;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///기타 연산 

hp_view_time = 80;
hp_view_val = 0;

hit_dmg = 0;

hurt_time = 20;
hurt_val = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///이동 / 공격
image_speed = g.game_spd_val;

if( enemy_hp &lt;= 0 )
{
    inst = instance_create(x, y, obj_orang_die);
    inst.move_h_spd = move_h_val;
    inst.move_v_spd = move_v_spd;
    inst.image_xscale = image_xscale;
    instance_destroy();
}

if( sprite_index == spr_enemy_orang_attack )
{
    if( place_free(x, y+1) ) 
        if( place_free(x + move_h_val * g.game_spd_val * 2.5, y) ) 
            x += move_h_val * g.game_spd_val * 2.5;
    
}
else
{
    if( !place_free( x + move_h_val * g.game_spd_val, y) or
        collision_point( x + (sign(image_xscale) * (bbox_right-bbox_left) * 0.5), 
                    bbox_bottom+2, obj_col_parant, true, true) == noone )
    {
        move_h_val *= -1;
        image_xscale = sign(move_h_val);
    }
    
    if( place_free(x + move_h_val * g.game_spd_val, y) ) 
        x += move_h_val * g.game_spd_val;
    
    if( det_disturb &lt;= 0 )
    {
        if( instance_exists(obj_hero) )
        {
            det_inst = instance_nearest(x, y, obj_hero);
            if( sign(det_inst.x - x) == sign(image_xscale) )
            {
                if( abs(det_inst.x - x) &lt; det_range_front &amp;&amp; 
                    abs(det_inst.y - y) &lt; det_range_height )
                {
                    sprite_index = spr_enemy_orang_attack;
                    image_index = 0;
                    move_v_spd = -move_jump_val;
                }
            }
        }
    }
    else
    {
        det_disturb -= g.game_spd_val;
    }
}

move_v_spd += g.grav_lev / room_speed * g.game_spd_val;

if( place_free(x, y+move_v_spd) ) 
{
    y += move_v_spd * g.game_spd_val;
}
else
{
    move_contact_solid(270, move_v_spd);
    move_v_spd = 0;
}



temp_col = collision_rectangle( bbox_left, bbox_top, bbox_right, bbox_bottom, 
                                obj_hero, true, true )
if( temp_col != noone )
{
    temp_col.hit_dmg = enemy_dmg;
    temp_col.knock_power = enemy_knock * sign(image_xscale);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if( sprite_index == spr_enemy_orang_attack )
{
    sprite_index = spr_enemy_orang_run;
    if( instance_exists( obj_hero ) )
    {
        det_inst = instance_nearest(x, y, obj_hero);
        move_h_val = abs(move_h_val) * sign(det_inst.x - x)
        image_xscale = sign(move_h_val);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
draw_sprite_ext( sprite_index, image_index, x, y, image_xscale, 1, 0, 
                 make_colour_hsv(0, 255 * (hurt_val/hurt_time), 255), 1 );

if( hurt_val &gt; 0 ) hurt_val -= g.game_spd;
    
if( hit_dmg &gt; 0 )
{
    enemy_hp -= hit_dmg;
    hit_dmg = 0;
    hp_view_val = hp_view_time;
    hurt_val = hurt_time;
    if( sprite_index != spr_enemy_orang_attack )
    {
        if( instance_exists( obj_hero ) )
        {
            det_inst = instance_nearest(x, y, obj_hero);
            move_h_val = abs(move_h_val) * sign(det_inst.x - x)
            image_xscale = sign(move_h_val);
        }
    }
}

if( hp_view_val &gt; 0 )
{
    hp_view_val -= g.game_spd_val;
    draw_sprite( spr_enemyhp_001, 0, x - 60, bbox_top - 60 );
    draw_sprite_part( spr_enemyhp_002, 0, 0, 0, 
                      (enemy_hp / enemy_hp_max) * 112, 38, x - 54, bbox_top - 58 );
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
